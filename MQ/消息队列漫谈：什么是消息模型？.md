# 消息队列漫谈：什么是消息模型？
作者：阿茂

上一篇我们大致说了关于消息队列的一些特性以及适用场景，相信大家经过学习大致知道自己当下适合哪一款消息队列产品了。那么随着你了解到更多的消息队列产品的时候，很多术语名词像Queue，Exchange，Topic，Partition，Broken。。。都纷纷冒了出来，让思路逐渐清晰的你又陷入无限的思考中，它们之间到底是什么关系？它们之间又有什么区别？它们是基于什么规范提出的这一套概念？等等一系列问题。

说起这些我们不得不先说说关于消息队列的规范JMS（Java Message Service）与AMQP（Advanced Message Queuing Protocol）协议。它是早期的一些国际组织制定的一套关于消息队列实现的规范与协议。JMS是一个Java平台中关于面向消息中间件（MOM）的API，用于在两个应用程序之间，或分布式系统中发送消息，进行异步通信。Java消息服务是一个与具体平台无关的API，它包括两种消息模式，点对点和发布者／订阅者：

- JMS点对点或队列模型：一个生产者向一个特定的队列发布消息，只有一个消费者从该队列中读取消息；生产者不需要在接收者消费该消息期间处于运行状态，接收者也同样不需要在消息发送时处于运行状态；每一个成功处理的消息都由接收者签收；
- JMS发布者／订阅者模型：一个生产者向一个特定的队列发布消息，0个或多个订阅者可以接受来自特定消息主题的消息；发布者需要创建一个订阅主题（Topic）以便客户能够购订阅并保持持续的活动以接受消息，一个订阅主题是由至少一个队列（Queue）组成的，除非订阅者创建了持久的订阅，在订阅者未连接时发布的消息将在订阅者重新连接时重新发布。

![](../resource/JMS消息模型.jpg)

在2006年摩根大通发布了AMQP规范，它制定了消息传递方和接收方的行为，以使消息在不同的提供商之间实现互操作性，就像SMTP，HTTP，FTP等协议可以创建交互系统一样，与JMS不同的是AMQP不在关注API层面上的统一，它关注的则是关注于各种消息如何以字节流的形式进行传递，使用了符合协议实现的任意应用程序之间可以保持对消息的创建、传递。像早期的老牌消息队列AcitveMQ，它是基于JMS规范开发实现而且还支持AMQP协议的。

而随着互联网业务快速的发展，这些规范慢慢的无法满足日益繁杂的互联网架构，这时候各大厂商就纷纷出手开发出了满足自己业务领域的新的消息队列模型，逐渐被发扬光大。